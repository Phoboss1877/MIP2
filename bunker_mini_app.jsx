import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { motion } from "framer-motion";

export default function BunkerApp() {
  const [screen, setScreen] = useState("lobby");
  const [roomCode, setRoomCode] = useState("");
  const [players, setPlayers] = useState([
    { id: 1, name: "–ò–≥—Ä–æ–∫ 1" },
    { id: 2, name: "–ò–≥—Ä–æ–∫ 2" },
    { id: 3, name: "–ò–≥—Ä–æ–∫ 3" }
  ]);
  const [catastrophe] = useState("–Ø–¥–µ—Ä–Ω–∞—è –≤–æ–π–Ω–∞. –í –±—É–Ω–∫–µ—Ä–µ –º–µ—Å—Ç–∞ –Ω–∞ 4 —á–µ–ª–æ–≤–µ–∫–∞.");

  // Mock start game
  const startGame = () => setScreen("game");
  const backToLobby = () => setScreen("lobby");

  return (
    <div className="min-h-screen bg-black text-white flex flex-col items-center p-4">
      {screen === "lobby" && (
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="w-full max-w-sm space-y-4">
          <h1 className="text-2xl font-bold text-center">–ë—É–Ω–∫–µ—Ä</h1>
          <Button className="w-full bg-white text-black rounded-2xl" onClick={() => setScreen("room")}>–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</Button>
          <input
            type="text"
            placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥"
            className="w-full p-2 rounded-2xl text-black"
            value={roomCode}
            onChange={(e) => setRoomCode(e.target.value)}
          />
          {roomCode && <Button className="w-full bg-white text-black rounded-2xl">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</Button>}
        </motion.div>
      )}

      {screen === "room" && (
        <motion.div initial={{ x: 50, opacity: 0 }} animate={{ x: 0, opacity: 1 }} className="w-full max-w-sm space-y-4">
          <h2 className="text-xl font-semibold text-center">–ö–æ–º–Ω–∞—Ç–∞ 123</h2>
          <Card className="bg-gray-900 rounded-2xl">
            <CardContent className="space-y-2">
              <div className="flex justify-between"><span>–ò–≥—Ä–æ–∫–∏</span><span>{players.length}</span></div>
              <div className="flex justify-between"><span>–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞</span><span>–°–ª—É—á–∞–π–Ω–∞—è</span></div>
            </CardContent>
          </Card>
          <Button className="w-full bg-white text-black rounded-2xl" onClick={startGame}>–ù–∞—á–∞—Ç—å</Button>
        </motion.div>
      )}

      {screen === "game" && (
        <motion.div initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} className="w-full max-w-md space-y-4">
          <Card className="bg-gray-900 rounded-2xl">
            <CardContent>
              <h3 className="font-bold mb-2">–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞</h3>
              <p>{catastrophe}</p>
            </CardContent>
          </Card>
          <div className="space-y-2">
            {players.map((p) => (
              <Card key={p.id} className="bg-gray-800 rounded-2xl">
                <CardContent className="flex justify-between items-center">
                  <span>{p.name}</span>
                  <Button variant="outline" className="text-xs">–í—ã–≥–Ω–∞—Ç—å</Button>
                </CardContent>
              </Card>
            ))}
          </div>
          <Button className="w-full bg-white text-black rounded-2xl" onClick={() => setScreen("result")}>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</Button>
        </motion.div>
      )}

      {screen === "result" && (
        <motion.div initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} className="w-full max-w-sm space-y-4 text-center">
          <h2 className="text-2xl font-bold">–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
          <p className="text-lg">–í—ã –≤—ã–∂–∏–ª–∏ üéâ</p>
          <Button className="w-full bg-white text-black rounded-2xl" onClick={backToLobby}>–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑</Button>
        </motion.div>
      )}
    </div>
  );
}